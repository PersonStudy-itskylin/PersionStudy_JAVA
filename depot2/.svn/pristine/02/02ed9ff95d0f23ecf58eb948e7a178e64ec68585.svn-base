<?xml version="1.0" encoding="UTF-8" ?> 
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.ssi.depot.dao.IProductInOutDAO">
	<resultMap type="ProductInOut" id="supProductInOut">
		<id column="pioid" property="pioid" jdbcType="int" />
        <result column="proid" property="proid"/>
        <result column="pioquantity" property="pioquantity"/>
        <result column="piocount" property="piocount"/>
        <result column="piotype" property="piotype"/>
        <result column="piooperation" property="piooperation"/>
        <result column="piooperationnum" property="piooperationnum"/>
        <result column="pioagreementid" property="pioagreementid"/>
        <result column="pioprojectid" property="pioprojectid"/>
        <result column="pioprojectname" property="pioprojectname"/>
        <result column="piouttime" property="piouttime"/>
        <result column="piointime" property="piointime"/>
        <result column="piosign" property="piosign"/>
        <result column="pioapply" property="pioapply"/>
        <result column="piodelivery" property="piodelivery"/>
        <result column="pioremark" property="pioremark"/>
        <result column="pioadminsign" property="pioadminsign"/>
		<collection property="supAccount"
			resultMap="com.ssi.depot.dao.IAccountDAO"
		/>
		<collection property="supProductInOut"
			resultMap="com.ssi.depot.dao.IProductInOutDAO"
		/>
	</resultMap>
	<!-- 插入数据 -->
	<insert id="insertProductInOut" parameterType="ProductInOut"
		useGeneratedKeys="true" keyProperty="id">
		INSERT INTO 
		TPRODUCTINOUT(
			proid,
			accid,
			pioquantity,
			piocount,
			piotype,
			piooperation,
			piooperationnum,
			pioagreementid,
			pioprojectid,
			pioprojectname,
			piouttime,
			piointime,
			piosign,
			pioapply,
			piodelivery,
			pioremark,
			pioadminsign
		)VALUES(
			#{proid},
			#{accid},
			#{pioquantity},
			#{piocount},
			#{piotype},
			#{piooperation},
			#{piooperationnum},
			#{pioagreementid},
			#{pioprojectid},
			#{pioprojectname},
			#{piouttime},
			#{piointime},
			#{piosign},
			#{pioapply},
			#{piodelivery},
			#{pioremark},
			#{pioadminsign}
		)
	</insert>
	
	<!-- 删除数据 -->
	<delete id="deleteProductInOutById" parameterType="int">
		DELETE FROM TPRODUCTINOUT WHERE pioid = #{pioid}
	</delete>

	<!-- 修改用户信息 -->
	<update id="updateProductInOutById" parameterType="ProductInOut">
		UPDATE TPRODUCTINOUT
		SET
			proid={proid},
			accid=#{accid},
			pioquantity=#{pioquantity},
			piocount=#{piocount},
			piotype=#{piotype},
			piooperation=#{piooperation},
			piooperationnum=#{piooperationnum},
			pioagreementid=#{pioagreementid},
			pioprojectid=#{pioprojectid},
			pioprojectname=#{pioprojectname},
			piouttime=#{piouttime},
			piointime=#{piointime},
			piosign=#{piosign},
			pioapply=#{pioapply},
			piodelivery=#{piodelivery},
			pioremark=#{pioremark},
			pioadminsign=#{pioadminsign}
		WHERE
			pioid=#{pioid}
	</update>
	
	<!-- 全体查询数据信息 -->
	<select id="selectProductInOutAll" resultMap="supProductInOut">
		SELECT 
            pio.pioid,pio.pioquantity, pio.piocount,pio.piotype,pio.piooperation,pio.piooperationnum,pio.pioagreementid,pio.pioprojectid,pio.pioprojectname,pio.piouttime,pio.piointime,pio.piosign,pio.pioapply,pio.piodelivery,pio.pioremark,pio.pioadminsign,
			pro.proid,pro.proname,pro.promodel,pro.proprice,pro.protype,pro.proquantity, pro.prosource, pro.proeditor,pro.procreatetime, pro.proedittime, pro.proremark,
            a.id,a.username,a.`password`,a.realname,a.role,a.description,a.phone,a.tel,a.email,a.qq,a.state,a.ip,a.createTime,a.updateTime,a.remark
		FROM 
				TPRODUCTINOUT pio
			LEFT JOIN 
				TPRODUCT pro ON pio.proid = pro.proid
			LEFT JOIN 
				TACCOUNT a ON pio.accid = a.id
        ORDER BY pio.piouttime,pio.piointime,a.id DESC
	</select>
	
	<!-- id查询 -->
	<select id="selectProductInOutById" parameterType="int" resultType="supProductInOut">
		SELECT 
            pio.pioid,pio.pioquantity, pio.piocount,pio.piotype,pio.piooperation,pio.piooperationnum,pio.pioagreementid,pio.pioprojectid,pio.pioprojectname,pio.piouttime,pio.piointime,pio.piosign,pio.pioapply,pio.piodelivery,pio.pioremark,pio.pioadminsign,
			pro.proid,pro.proname,pro.promodel,pro.proprice,pro.protype,pro.proquantity, pro.prosource, pro.proeditor,pro.procreatetime, pro.proedittime, pro.proremark,
            a.id,a.username,a.`password`,a.realname,a.role,a.description,a.phone,a.tel,a.email,a.qq,a.state,a.ip,a.createTime,a.updateTime,a.remark
		FROM 
				TPRODUCTINOUT pio
			LEFT JOIN 
				TPRODUCT pro ON pio.proid = pro.proid
			LEFT JOIN 
				TACCOUNT a ON pio.accid = a.id
		WHERE pio.pioid = #{pioid}
        ORDER BY pio.piouttime,pio.piointime,a.id DESC
	</select>
	<!-- 模糊查询 -->
	<select id="selectProductInOutBySome" resultType="supProductInOut">
		SELECT 
            pio.pioid,pio.pioquantity, pio.piocount,pio.piotype,pio.piooperation,pio.piooperationnum,pio.pioagreementid,pio.pioprojectid,pio.pioprojectname,pio.piouttime,pio.piointime,pio.piosign,pio.pioapply,pio.piodelivery,pio.pioremark,pio.pioadminsign,
			pro.proid,pro.proname,pro.promodel,pro.proprice,pro.protype,pro.proquantity, pro.prosource, pro.proeditor,pro.procreatetime, pro.proedittime, pro.proremark,
            a.id,a.username,a.`password`,a.realname,a.role,a.description,a.phone,a.tel,a.email,a.qq,a.state,a.ip,a.createTime,a.updateTime,a.remark
		FROM 
				TPRODUCTINOUT pio
			LEFT JOIN 
				TPRODUCT pro ON pio.proid = pro.proid
			LEFT JOIN 
				TACCOUNT a ON pio.accid = a.id
		WHERE pio.pioid = #{pioid}
        ORDER BY pio.piouttime,pio.piointime,a.id DESC
	</select>
	
	<!-- limit 分页 -->
	<select id="selectProductInOutPage" resultType="supProductInOut">
		SELECT 
            pio.pioid,pio.pioquantity, pio.piocount,pio.piotype,pio.piooperation,pio.piooperationnum,pio.pioagreementid,pio.pioprojectid,pio.pioprojectname,pio.piouttime,pio.piointime,pio.piosign,pio.pioapply,pio.piodelivery,pio.pioremark,pio.pioadminsign,
			pro.proid,pro.proname,pro.promodel,pro.proprice,pro.protype,pro.proquantity, pro.prosource, pro.proeditor,pro.procreatetime, pro.proedittime, pro.proremark,
            a.id,a.username,a.`password`,a.realname,a.role,a.description,a.phone,a.tel,a.email,a.qq,a.state,a.ip,a.createTime,a.updateTime,a.remark
		FROM 
				TPRODUCTINOUT pio
			LEFT JOIN 
				TPRODUCT pro ON pio.proid = pro.proid
			LEFT JOIN 
				TACCOUNT a ON pio.accid = a.id
        ORDER BY pio.piouttime,pio.piointime,a.id DESC
		LIMIT #{start},#{pageSize}
	</select>
	
</mapper>