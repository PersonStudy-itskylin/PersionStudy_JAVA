<?xml version="1.0" encoding="UTF-8" ?> 
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
   <mapper namespace="com.ssi.depot.dao.IProductDAO">
	<resultMap type="Product" id="supProduct">
		<id column="proid" property="proid" jdbcType="int" />
		<result column="proname" property="proname"/>
		<result column="promodel" property="promodel"/>
		<result column="proprice" property="proprice"/>
		<result column="protype" property="protype"/>
		<result column="proquantity" property="proquantity"/>
		<result column="prosource" property="prosource"/>
		<result column="proeditor" property="proeditor"/>
		<result column="procreatetime" property="procreatetime"/>
		<result column="proedittime" property="proedittime"/>
		<result column="proremark" property="proremark"/>
		<collection property="supAccount"
			resultMap="com.ssi.depot.dao.IAccountDAO"
		/>
	</resultMap>
    <!-- 插入数据 -->
    <insert id="insertProduct" parameterType="Product" useGeneratedKeys="true" keyProperty="id" >
     INSERT INTO TPRODUCT(
      	accid,
      	proname,
      	promodel,
      	proprice,
      	protype,
      	proquantity,
      	prosource,
      	proeditor,
      	procreatetime,
      	proremark
      )VALUES(
      	#{accid},
      	#{proname},
      	#{promodel},
      	#{proprice},
      	#{protype},
      	#{proquantity},
      	#{prosource},
      	#{proeditor},
      	#{procreatetime},
      	#{proremark}
      )
    </insert>
    
    <!-- 删除数据 -->
    <delete id="delProduct" parameterType="int">
        DELETE FROM TPRODUCT WHERE proid = #{proid}
    </delete>

    <!-- 修改用户信息 -->
    <update id="updateProduct" parameterType="Product">
    	UPDATE  TPRODUCT 
    	SET 
    		accid = #{accid},
      		proname = #{proname},
      		promodel = #{promodel},
      		proprice = #{proprice},
      		protype = #{protype},
      		proquantity = #{proquantity},
      		prosource = #{prosource},
      		proeditor = #{proeditor},
      		procreatetime = #{procreatetime},
      		proremark =#{proremark}
    	WHERE 
    		proid = #{proid}
    </update>
    
    <!-- 全体查询数据信息  -->
    <select id="selectProductAll" resultMap="supProduct">
        SELECT
        	pro.proid,pro.proname,pro.promodel,pro.proprice,pro.protype,pro.proquantity, pro.prosource, pro.proeditor,pro.procreatetime, pro.proedittime, pro.proremark,
            a.id,a.username,a.realname,a.role,a.description,a.phone,a.tel,a.email,a.qq,a.state,a.ip,a.createTime,a.updateTime,a.remark
        FROM 
        		TPRODUCT pro
        	LEFT JOIN TACCOUNT a ON pro.accid = a.id
        ORDER BY pro.proedittime DESC
    </select>
    
    <!-- 查询数据id  -->
    <select id="selectProductById" parameterType="int" resultMap="supProduct">
        SELECT
        	pro.proid,pro.proname,pro.promodel,pro.proprice,pro.protype,pro.proquantity, pro.prosource, pro.proeditor,pro.procreatetime, pro.proedittime, pro.proremark,
            a.id,a.username,a.realname,a.role,a.description,a.phone,a.tel,a.email,a.qq,a.state,a.ip,a.createTime,a.updateTime,a.remark
        FROM 
        		TPRODUCT pro
        	LEFT JOIN TACCOUNT a ON pro.accid = a.id
		WHERE pro.proid = ${proid}
		ORDER BY pro.proedittime DESC
    </select>
       
    <!-- 分页查询 -->
    <select id="selectProductByPage" resultMap="supProduct">
    	SELECT
        	pro.proid,pro.proname,pro.promodel,pro.proprice,pro.protype,pro.proquantity, pro.prosource, pro.proeditor,pro.procreatetime, pro.proedittime, pro.proremark,
            a.id,a.username,a.realname,a.role,a.description,a.phone,a.tel,a.email,a.qq,a.state,a.ip,a.createTime,a.updateTime,a.remark
        FROM 
        		TPRODUCT pro
        	LEFT JOIN TACCOUNT a ON pro.accid = a.id
		ORDER BY pro.proedittime DESC
    	LIMIT #{start},#{pageSize}
    </select>
    
    <!-- 根据参数来查询 -->
</mapper>



















